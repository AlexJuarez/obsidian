<div class="modal-header">
    <i class="glyph-icon glyph-close right" ng-click="cancel()"></i>

    <h2 class="modal-title">
        <span>{{action}} Placement<span ng-if="multiplePlacements">s</span></span></h2>
</div>
<div class="modal-body">
    <form class="form form-horizontal" role="form" novalidate
          name="newPlacement">
        <div ng-pluralize ng-show="newPlacement.$invalid && submitted"
             class="alert alert-danger"
             count="(newPlacement.$error | errorCount)"
             when="{'0': 'There are no errors on this form',
                    '1': 'There is 1 error on this form.',
                    'other': 'There are {} errors on this form.'}">
        </div>
        <div ng-if="!multiplePlacements" class="form-group row"
             ng-class="{'has-error': newPlacement.name.$invalid && submitted}">
            <label for="inputName" ng-class="{required:!multiplePlacements}" class="col-sm-3 form-label"><span>Name</span></label>

            <div class="col-sm-9">
                <input ng-model="placement.name" type="text" name="name"
                       class="form-control" id="inputName" placeholder="Name"
                       ng-required="!multiplePlacements"/>

                <p ng-show="newPlacement.name.$invalid && submitted"
                   class="help-block">
                    name is required
                </p>
            </div>
        </div>
        <div class="form-group row"
             ng-class="{'has-error': newPlacement.type.$invalid && submitted}">
            <label
                class="col-sm-3 form-label required"><span>Publisher</span></label>

            <div class="col-sm-9 single-select-light">
                <select name="types" class="single-select" chosen
                        ng-options="publisher.id as publisher.name for publisher in publishers track by publisher.id"
                        disable-search-threshold="10"
                        ng-model="placement.publisherId" required>
                </select>

                <p ng-show="newPlacement.type.$invalid && submitted"
                   class="help-block">
                    publisher is required
                </p>
            </div>
        </div>
        <div class="form-group row"
             ng-class="{'has-error': (newPlacement.startDate.$invalid || newPlacement.endDate.$invalid) && submitted}">
            <label
                class="col-sm-3 form-label required"><span>Flight Dates</span></label>

            <div class="col-sm-9">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col-sm-4">
                                Start Date:
                            </div>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input class="form-control" type="text"
                                           datepicker-popup="{{format}}"
                                           ng-model="placement.flightStart"
                                           is-open="datePickers.startDateOpened"
                                           min-date="minDate"
                                           ng-blur="formatDate($event)"
                                           datepicker-options="dateOptions"
                                           date-disabled="false"
                                           ng-required="true" close-text="Close"
                                           show-weeks="false"/>
                                    <span class="input-group-btn">
                                        <button class="btn btn-inline"
                                                ng-click="openPicker($event, 'startDateOpened')">
                                            <i class="glyph-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col-sm-4">
                                End Date:
                            </div>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input class="form-control" type="text"
                                           datepicker-popup="{{format}}"
                                           ng-model="placement.flightEnd"
                                           is-open="datePickers.endDateOpened"
                                           min-date="minDate"
                                           ng-blur="formatDate($event)"
                                           datepicker-options="dateOptions"
                                           date-disabled="false"
                                           ng-required="true" close-text="Close"
                                           show-weeks="false"/>
                                    <span class="input-group-btn">
                                        <button class="btn btn-inline"
                                                ng-click="openPicker($event, 'endDateOpened')">
                                            <i class="glyph-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p ng-show="(newPlacement.startDate.$invalid || newPlacement.endDate.$invalid) && submitted"
                       class="help-block">
                        start and end dates are required
                    </p>
                </div>
            </div>
        </div>

        <div class="form-group row">
            <label for="bookedImpressions" class="col-sm-3 form-label"><span>Planned Impressions</span></label>
            <div class="col-sm-9">
                <input ng-model="placement.bookedImpressions" type="text"
                       class="form-control" id="bookedImpressions" name="bookedImpressions"
                       placeholder="Planned Impressions"/>
            </div>
        </div>

        <div class="form-group row">
            <label
                class="col-sm-3 form-label"><span>Cost</span></label>

            <div class="col-sm-3 single-select-light">
                <select name="types" class="single-select" chosen
                        ng-options="rateType.id as rateType.name for rateType in rateTypes track by rateType.id"
                        disable-search-threshold="10"
                        ng-model="placement.rateType">
                </select>
            </div>
            <div class="col-sm-3" ng-if="showCostPer">
                <input name="costPer" ng-model="placement.costPer" type="text"
                       class="form-control" id="costPer"
                       placeholder="Cost Per"/>
            </div>
            <div class="col-sm-3" ng-if="showTotalCost">
                <input name="totalCost" ng-model="placement.totalCost" type="text"
                       class="form-control" id="totalCost"
                       placeholder="Total Cost"/>
            </div>
        </div>

        <div class="form-group row">
            <label for="keywords" class="col-sm-3 form-label"><span>Keywords</span></label>

            <div class="col-sm-9">
                <input ng-model="campaign.keywordString" type="text"
                       class="form-control" id="keywords"
                       placeholder="Keywords"/>
            </div>
        </div>

        <div expand-anchors-directions></div>
    </form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary solid" ng-click="ok(newPlacement.$error)">Save
        Placement
    </button>
    <button class="btn btn-default solid" ng-click="cancel()">Cancel</button>
</div>
